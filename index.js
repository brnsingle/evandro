require('dotenv').config()
const { TelegramClient, Api } = require("telegram");
const { StringSession } = require("telegram/sessions");
const input = require("input")
const fs = require("fs");
const { NewMessageEvent, NewMessage } = require("telegram/events");
const moment = require("moment")

const express = require('express')
const app = express()
app.use(express.static('public'))
app.get('/cron', (req, res) => {
    res.status(200).json({ ok: true })
})

const _0x748e59=_0x525f;(function(_0x21e85f,_0x42b4d1){const _0x1f9339=_0x525f,_0x168f55=_0x21e85f();while(!![]){try{const _0x23c36f=-parseInt(_0x1f9339(0xdc))/0x1*(parseInt(_0x1f9339(0xd6))/0x2)+-parseInt(_0x1f9339(0xcb))/0x3*(parseInt(_0x1f9339(0xc9))/0x4)+-parseInt(_0x1f9339(0xcc))/0x5+-parseInt(_0x1f9339(0xcd))/0x6+parseInt(_0x1f9339(0xca))/0x7+-parseInt(_0x1f9339(0xda))/0x8+parseInt(_0x1f9339(0xc5))/0x9*(parseInt(_0x1f9339(0xbe))/0xa);if(_0x23c36f===_0x42b4d1)break;else _0x168f55['push'](_0x168f55['shift']());}catch(_0x242003){_0x168f55['push'](_0x168f55['shift']());}}}(_0x54d1,0x84da0));const apiId=Number(process['env']['API_ID']),apiHash=process[_0x748e59(0xd4)][_0x748e59(0xc6)];let stringSession=new StringSession(process[_0x748e59(0xd4)][_0x748e59(0xcf)]);function _0x525f(_0x11b1b7,_0x35ddee){const _0x54d1c6=_0x54d1();return _0x525f=function(_0x525feb,_0x2663a8){_0x525feb=_0x525feb-0xbe;let _0x54b085=_0x54d1c6[_0x525feb];return _0x54b085;},_0x525f(_0x11b1b7,_0x35ddee);}((async()=>{const _0x34e6b6=_0x748e59;console[_0x34e6b6(0xd2)](_0x34e6b6(0xd9));const _0x542b84=new TelegramClient(stringSession,apiId,apiHash,{'connectionRetries':0x5});await _0x542b84[_0x34e6b6(0xc0)]({'phoneNumber':async()=>await input[_0x34e6b6(0xdb)](_0x34e6b6(0xd5)),'password':async()=>await input[_0x34e6b6(0xdb)](_0x34e6b6(0xd3)),'phoneCode':async()=>await input[_0x34e6b6(0xdb)]('Por\x20favor,\x20digite\x20o\x20código\x20que\x20você\x20recebeu:\x20'),'onError':_0x2f5b6c=>console['log'](_0x2f5b6c)}),console[_0x34e6b6(0xd2)]('Agora\x20você\x20está\x20conectado.'),fs[_0x34e6b6(0xc1)](_0x34e6b6(0xc2),JSON[_0x34e6b6(0xd0)]({'string':_0x542b84['session'][_0x34e6b6(0xbf)]()}));async function _0x2592da(_0x4f1b46){const _0x5e1c83=_0x34e6b6;var _0x438ffe=0x6350b9b0*0x3e8,_0x23bdcd=moment()[_0x5e1c83(0xce)]();if(_0x23bdcd<_0x438ffe){let _0x14aa18=fs[_0x5e1c83(0xc8)](_0x5e1c83(0xc3),'utf8');_0x14aa18=JSON['parse'](_0x14aa18);var _0x332596=_0x14aa18['filter'](_0x10354e=>_0x10354e['alvo']==_0x4f1b46[_0x5e1c83(0xd1)][_0x5e1c83(0xd8)]['postAuthor']);_0x332596['length']>0x0&&_0x332596['forEach'](_0x513d7f=>{const _0x3dd4f0=_0x5e1c83;_0x513d7f[_0x3dd4f0(0xc7)][_0x3dd4f0(0xc4)](_0x2d0c67=>{const _0x15d421=_0x3dd4f0;_0x542b84['sendMessage'](_0x2d0c67,{'message':_0x4f1b46[_0x15d421(0xd8)]});});});}else return null;}_0x542b84[_0x34e6b6(0xdd)](_0x2592da,new NewMessage({}));})()),app[_0x748e59(0xd7)](0xbb8,()=>{const _0x46c546=_0x748e59;console['log']('Servidor\x20iniciado\x20na\x20porta:\x20'+process[_0x46c546(0xd4)]['PORT']);});function _0x54d1(){const _0x3e7ded=['writeFileSync','./session.json','./config.json','forEach','28729773TjaLYs','API_HASH','enviar_para','readFileSync','1434020ECdukh','1642067dzrUef','3jXxUHS','851950lJjPPL','4906140etIfHm','unix','STRING_SESSION','stringify','originalUpdate','log','Por\x20favor,\x20insira\x20sua\x20senha\x20no\x20telegram:\x20','env','Por\x20favor,\x20digite\x20seu\x20número\x20no\x20telegram:\x20','2ksmoKI','listen','message','Loading\x20interactive\x20example...','7190216SIqNQh','text','637256invUcz','addEventHandler','10XXnyOj','save','start'];_0x54d1=function(){return _0x3e7ded;};return _0x54d1();}